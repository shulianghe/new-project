<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"> 
<head> 
<title>��Ƶ���</title> 


<style type="text/css">
body,html {
	height: 100%;
	margin: 0;
	padding: 0;
	color: #fff;
	font-family: Arial;
}

.layout_top {
	float: left;
	height: 10%;
	width: 100%;
	background: #888;
}
.layout_left {
	float: left;
	height: 80%;
	width: 20%;
	background: #888;
}

.layout_right {
	float: left;
	height: 80%;
	width: 80%;
	background: #888;
}
.layout_bottom {
	float: left;
	height: 10%;
	width: 100%;
	background: #888;
}
</style>

<script type="text/javascript" src="jquery-1.4.4.min.js"></script>
<script type="text/javascript">
<!--
	$(function() {		
		
		$("#Applet1").click(function(){
			alert("�ⲿdiv��" +$("#top").width()+" 	�ߣ�"+ $("#top").height()+"\n"+"�ڲ�div��" +$("#Applet1").width()+" 	�ߣ�"+ $("#Applet1").height());
		});
		$("#Applet2").click(function(){
			alert("�ⲿdiv��" +$("#left_bottom").width()+" 	�ߣ�"+ $("#left_bottom").height()+"\n"+"�ڲ�div��" +$("#Applet3").width()+" 	�ߣ�"+ $("#Applet3").height());
		});
		$("#Applet3").click(function(){
			alert("�ⲿdiv��" +$("#right_bottom").width()+" 	�ߣ�"+ $("#right_bottom").height()+"\n"+"�ڲ�div��" +$("#Applet4").width()+" 	�ߣ�"+ $("#Applet4").height());
		});				
	});
//-->
<!-- ����Ҽ�
   // document.oncontextmenu=function(e){return false;}  
//-->

var ip;
//var provs = readFile('c:/deviceInfo.txt');
function getVLC(name){
        if (window.document[name])   
        {
                return window.document[name];
        }
        if (navigator.appName.indexOf("Microsoft Internet")==-1)
        {
                if (document.embeds && document.embeds[name])
                        return document.embeds[name];   
        }
        else
        {
                return document.getElementById(name);
        }
}

// ֹͣ����
function stopPlay(){
	vlc.playlist.stop();
 
	// �޸Ĳ���/ֹͣ��ť״̬
	document.getElementById("play_button").disabled=false;
    document.getElementById("stop_button").disabled=true;
}


// ���²���
function repeatPlay(){
	vlc.playlist.play();
	//setTimeout(checkVedioStatus,500);
	// �޸Ĳ���/ֹͣ��ť״̬
	document.getElementById("play_button").disabled=true;
    document.getElementById("stop_button").disabled=false;
}

// ����
function noSound(){
//	if(vlcSound>0){
		vlcSound=0;
//	}
	vlc.audio.toggleMute();
	vlcSound=vlc.audio.volume;
	document.getElementById("vlc_sound").value=vlcSound;
	if(vlcSound==0){
		// document.getElementById("no_sound").value="&nbsp;�ָ����&nbsp;";
		document.getElementById("no_sound").value=" "+"�ָ����"+" ";
	}else{
		// document.getElementById("no_sound").value="&nbsp;��&nbsp;&nbsp;&nbsp;&nbsp;��&nbsp;";
		document.getElementById("no_sound").value=" "+"��"+"  "+"��"+" ";
	}

}

// ����Ӽ�
function soundChange(nums){
	if(nums<0 && vlcSound==0){
	alert("�����С�������ټ������....");
	return;
	}
	vlcSound+=nums;
	if(vlcSound<=0){
		vlcSound=0;
		document.getElementById("no_sound").value=" "+"�ָ����"+" ";
	}else{
	// �����>0��ʱ�򣬶�Ҫ�Ѿ���ı�ʶ��
	document.getElementById("no_sound").value=" "+"��"+"  "+"��"+" ";
	}
	if(vlcSound>200){
		alert("�����󣬲�����������....");
		vlcSound=200;
	}
	vlc.audio.volume =vlcSound;
	document.getElementById("vlc_sound").value=vlcSound;
}

//ȫ��
function screenFull(){
	vlc.video.toggleFullscreen();
}

function doGo(mrl){
        var vlc = getVLC("vlc");
        itemId=vlc.playlist.add("rtsp://"+mrl);
        vlc.playlist.playItem(itemId);
		ip = mrl;
        
		document.getElementById("play_button").disabled=true;
		document.getElementById("stop_button").disabled=false;
}

function doGo1(mrl){
        var vlc = getVLC("vlc");
        itemId=vlc.playlist.add("rtsp://"+mrl+":8554/proxyStream");
        vlc.playlist.playItem(itemId);
		ip = mrl;
        
		document.getElementById("play_button").disabled=true;
		document.getElementById("stop_button").disabled=false;
}

        function iniEvent() {
            var provUL = document.getElementById("prov");
            if (provUL) {
                var allli = provUL.getElementsByTagName("li");
                for (i = 0; i < allli.length; i++) {
                    node = allli[i];
                    node.onmouseover = function () {        //��꾭��ʱ��ʾ��
                        this.className = "current";
                    }
                    node.onmouseout = function () {         //����뿪ʱ���ز�
                        this.className = this.className.replace("current", "");
                    }
                }
            }
        }
        function loadData() { 
			var provs = readFile('c:/deviceInfo.txt');
            var provUL = document.getElementById("prov");
            var nIndex = 0;
            for (var key in provs) {
                var provLi = document.createElement("li");
                provLi.id = "provLI" + nIndex;
                //provLi.innerHTML = "<a href='#'>" + key + "</a>";
                provUL.appendChild(provLi);        
                
                var citys = provs[key];
                if (citys.length > 0) {
                    var cityUL = document.createElement("ul");
                    var maxLength = 0;  
                    for (var i = 0; i < 1; i++) {
                        var cityName = citys[i];
                        if (cityName.length > maxLength) {
                            maxLength = cityName.length;  
                        }
                        var cityLI = document.createElement("li");
						var url="http://www.baidu.com";
                        cityLI.id = "cityLI" + i;
						//cityLI.title = citys.split(/\:/g)[1];
                        //cityLI.innerHTML = ("<a href='#' onclick=\"return confirm('ȷ��Ҫɾ����')\" >" + citys + "</a>");
						cityLI.innerHTML = "<a  title='"+citys.split(/\:/g)[1]+"' href='#' onclick=\"doGo(this.title);return false;\" >" + citys + "</a>";
                        cityUL.appendChild(cityLI);
                    }
                    if (maxLength <= 6) {
                        maxLength = 100;
                    }
                    else {
                        maxLength = maxLength * 20;   
                    }
                    maxLength = maxLength + "px";   
                    cityUL.style.width= maxLength;    
                    provLi.appendChild(cityUL);         
                }
                nIndex++;
            }
            iniEvent();  
			//alert("DATA LOADED");
        }

function readFile(filename){   

	var fso = new ActiveXObject("Scripting.FileSystemObject");   
	var f = fso.OpenTextFile(filename,1);   
	var s = "";
	var t="";
	while (!f.AtEndOfStream)
	{
		s += f.ReadLine()+"\n"; 
	}
	f.Close();  

/*
	var Arr=new Array();
	try
	{
		var fso=new ActiveXObject("scripting.filesystemobject");
		var txtstream=fso.openTextFile(filename,1);
		var txt='';
		while(!txtstream.atEndOfLine)
		{
			Arr.push(txtstream.readLine());
		}
		txtstream.close();
		txtstream=null;
		fso=null;
	}
	catch(e){alert(e);}
	for(var i=0;i<Arr.length;i++)
	{
		alert(Arr[i]);
	}
	*/

	var strs = s.split(/\s/g);//������name��ip�ֿ��ȡ,�Կո�ֿ�
//	for(var i = 0; i < strs.length; i++) {
//		alert(strs[i]);
//	}
	//alert("this is :" +s.split(/\s/g)[0]);
	
	return strs;   
}   
  
//д�ļ�   
function writeFile(filename,filecontent){   
    var fso, f, s ;   
    fso = new ActiveXObject("Scripting.FileSystemObject");      
    f = fso.OpenTextFile(filename,8,true); 
    f.WriteLine(filecontent); 
    f.Close();   
	alert('����豸�ɹ�����ˢ�¼��ҳ���ȡ�����豸�б�'); 
} 
</script>
 
</head> 


<body onload ="loadData()">   
<div style="border: 2px red solid; margin: 0px; padding: 0px; height: 99%; width: 99%;"> 
		 <div id="top" class="layout_top">  
            <div id="Applet1"                 
				<p><h1 align="center">��Ƶ���DEMO</h1>
				</div>  
        </div>  
        <div id="left_bottom" class="layout_left">  
            <div id="Applet2"  
            <li><a href="">��ҳ</a></li><br>
			<br>
			<div style="width: 100px; border: 0px solid #CCC; border-bottom:none;">�豸�б�:<br>
				<ul id="prov" style="list-style: none; margin: 0px; padding: 0px; ">
				</ul>
			</div> 
			<br>
			<li><a href="./addDev.html" target=_blank>����豸</a></li><br>
			<li><a href="http://www.homewell.com.cn">��������</a></li><br>
			<li><a href="#">�ϵ����</a></li>    
			</div>  
        </div> 
        <div id="right_bottom" class="layout_right">  
            <div   id="Applet3"	
				
                style="border: 1px yellow solid; margin: 2px; padding: 2px; height: 97%;">���ҳ��
<!--[if IE]>
				<object type='application/x-vlc-plugin' id='vlc' events='True'
						classid='clsid:9BE31822-FDAD-461B-AD51-BE1D1C159921' 
						codebase="./axvlc.cab" width="100%" height="90%">
						<param name="mrl" value="rtsp://192.168.1.64" />
						<param name="showdisplay" value="true" />
						<param name="toolbar" value="ture" />
						<param name="autoloop" value="false" />
						<param name="autoplay" value="false" />
						<param name="volume" value="50" />
						<param name="starttime" value="0" />
				</object>
<![endif]-->
<!--[if !IE]><!-->
				<object type='application/x-vlc-plugin' id='vlc' events='True' width="100%" height="90%">
						<param name='mrl' value='rtsp://192.168.1.64' />
						<param name='volume' value='50' />
						<param name='autoplay' value='false' />
						<param name="toolbar" value="ture" />
						<param name='loop' value='false' />
						<param name='fullscreen' value='true' />

				</object>
<!--<![endif]-->
				<form action="./systerm.cgi" method="post" enctype="multipart/form-data" target="_blank">
					<input type="button" value="&nbsp;��&nbsp;&nbsp;��&nbsp;"  onclick="repeatPlay();" id="play_button">&nbsp;&nbsp;&nbsp;&nbsp;
					<input type="button" value="&nbsp;ͣ&nbsp;&nbsp;ֹ&nbsp;"  onclick="stopPlay();" id="stop_button">&nbsp;&nbsp;&nbsp;&nbsp;
					<input type="button" value="&nbsp;��&nbsp;&nbsp;��&nbsp;"  onclick="noSound();" id="no_sound">&nbsp;&nbsp;&nbsp;&nbsp;
					<input type="button" value="&nbsp;�������&nbsp;"  onclick="soundChange(-10);">&nbsp;&nbsp;&nbsp;&nbsp;
					<input type="button" value="&nbsp;������&nbsp;"  onclick="soundChange(10);">&nbsp;&nbsp;&nbsp;&nbsp;					
					<input type="submit" value="&nbsp;ץ&nbsp;&nbsp;��&nbsp;" name="capture">&nbsp;&nbsp;&nbsp;&nbsp;
					<input type="submit" value="&nbsp;¼&nbsp;&nbsp;��&nbsp;" name="record">&nbsp;&nbsp;
					<input type="submit" value="&nbsp;��&nbsp;&nbsp;��&nbsp;" name="reboot">&nbsp;&nbsp;&nbsp;&nbsp;
					<input type="submit" value="&nbsp;�����&nbsp;" name="Alarm">&nbsp;&nbsp;&nbsp;&nbsp;
					<input type="button" value="&nbsp;ȫ&nbsp;&nbsp;��&nbsp;"  onclick="screenFull()">&nbsp;&nbsp;&nbsp;&nbsp;
					<font color="red" size="2">�����</font><input type="text" id="vlc_sound" style="width: 40px;color: blue">
				</form>
			</div>  
		</div> 
		<div id="left_bottom" class="layout_bottom">
		<tr>
			<br>
			<td align="center"><center>��Ȩ���У�Υ�߱ؾ�</center></td>
			<hr size="6" width="30%" align="center"  noshade  color=red >
		</tr>
		</div>
    </div>  
</body>   
</html>  
